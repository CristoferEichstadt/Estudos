
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="main" style="width: 100%;
  height: 100%;">
    <div class="container">
        <!-- BEGIN SIDEBAR & CONTENT -->
        <div class="row margin-bottom-40">

            <div class="col-md-12 col-sm-12">
                <h1>INFORMAÇÕES DA SUA CONTA</h1>
                <!-- BEGIN CHECKOUT PAGE -->
                <div class="panel-group checkout-page accordion scrollable" id="checkout-page">


                    @{ if (ViewBag.PessoaFisica)
                        {
                            <!-- COMEÇO DADOS PESSOAIS -->
                            <div id="checkout" class="panel panel-default">
                                <div class="panel-heading">
                                    <h2 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#checkout-page" href="#checkout-content" class="accordion-toggle">
                                            Dados Pessoais
                                        </a>
                                    </h2>
                                </div>
                                <div id="checkout-content" class="panel-collapse collapse in">
                                    <div class="panel-body row">
                                        <h3 style="text-align:right;"><span class="require">*</span>Obrigatoriedades</h3>

                                        <form action="/MinhaConta/AlteraDados" method="post">
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label id="textNome" for="nome">Nome Completo<span class="require">*</span></label>
                                                    <input type="text" id="nome" name="nome" class="form-control" value="@ViewBag.Pessoa.Nome" maxlength="60" />
                                                </div>

                                                <div class="form-group">
                                                    <label for="cpf">CPF<span class="require">*</span></label>
                                                    <input type="text" id="cpf" name="cpf" class="form-control" value="@ViewBag.Pessoa.CpfCnpj" readonly />
                                                </div>


                                                <div class="form-group">
                                                    <label id="textData" for="dataNascimento">Data de Nascimento<span class="require">*</span></label>
                                                    <input type="date" id="dataNascimento" name="dataNascimento" class="form-control" value="@ViewBag.DataNascimento" />
                                                </div>

                                            </div>
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label id="textEmail" for="email">E-mail<span class="require">*</span></label>
                                                    <input type="email" id="email" name="email" class="form-control" value="@ViewBag.Usuario.Email" maxlength="50" />
                                                </div>

                                                <div class="form-group">
                                                    <label id="textSenha" for="senha">Senha<span class="require">*</span></label>
                                                    <input type="password" id="senha" name="senha" class="form-control" value="@ViewBag.Usuario.Senha" maxlength="8" minlength="8" />
                                                </div>



                                            </div>
                                            <div class="col-md-12">
                                                <button class="btn btn-primary  pull-right salvaDadosFisicos" type="submit" id="button-dados" data-toggle="collapse" data-parent="#checkout-page" data-target="#shipping-method-content">Salvar Dados Pessoais</button>
                                            </div>

                                        </form>
                                    </div>
                                </div>
                            </div>
                            <!-- FIM DADOS PESSOAIS -->
                        }

                        if (ViewBag.PessoaJuridica)
                        {
                            <!-- COMEÇO DADOS JURIDICOS -->
                            <div id="checkout" class="panel panel-default">
                                <div class="panel-heading">
                                    <h2 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#checkout-page" href="#checkout-content" class="accordion-toggle">
                                            Dados Jurídicos
                                        </a>
                                    </h2>
                                </div>
                                <div id="checkout-content" class="panel-collapse collapse in">
                                    <div class="panel-body row">
                                        <h3 style="text-align:right;"><span class="require">*</span>Obrigatoriedades</h3>

                                        <form action="/MinhaConta/AlteraDadosJuridicos" method="post">
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label id="textRazaoSocial" for="razaoSocial">Razão Social<span class="require">*</span></label>
                                                    <input type="text" id="razaoSocial" name="razaoSocial" class="form-control" value="@ViewBag.Pessoa.RazaoSocial" />
                                                </div>

                                                <div class="form-group">
                                                    <label for="cnpj">CNPJ<span class="require">*</span></label>
                                                    <input type="text" id="cnpj" name="cnpj" class="form-control" value="@ViewBag.Pessoa.CpfCnpj" readonly />
                                                </div>


                                                <div class="form-group">
                                                    <label id="textIE" for="ie">Inscrição Estadual<span class="require">*</span></label>
                                                    <input type="text" id="inscricaoEstadual" name="inscricaoEstadual" class="form-control" value="@ViewBag.Pessoa.InscricaoEstadual" />
                                                </div>

                                            </div>
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label id="textNomeFant" for="nomeFantasia">Nome Fantasia<span class="require">*</span></label>
                                                    <input type="text" id="nomeFantasia" name="nomeFantasia" class="form-control" value="@ViewBag.Pessoa.NomeFantasia" />
                                                </div>

                                                <div class="form-group">
                                                    <label id="textEmailJuridica" for="email">E-mail<span class="require">*</span></label>
                                                    <input type="email" id="emailJuridica" name="email" class="form-control" value="@ViewBag.Usuario.Email" />
                                                </div>

                                                <div class="form-group">
                                                    <label id="textSenhaJuridica" for="senha">Senha<span class="require">*</span></label>
                                                    <input type="password" id="senhaJuridica" name="senhaJuridica" class="form-control" value="@ViewBag.Usuario.Senha" />
                                                </div>



                                            </div>
                                            <div class="col-md-12">
                                                <button class="btn btn-primary pull-right salvaDadosJuridicos" type="submit" id="button-dados" data-toggle="collapse" data-parent="#checkout-page" data-target="#shipping-method-content">Salvar Dados</button>
                                            </div>

                                        </form>
                                    </div>
                                </div>
                            </div>

                        }



                    }

                    <!-- ENDEREÇO PARA ENTREGA -->
                    <div id="payment-address" class="panel panel-default">
                        <div class="panel-heading">
                            <h2 class="panel-title">
                                <a data-toggle="collapse" data-parent="#checkout-page" href="#payment-address-content" class="accordion-toggle">
                                    Endereço para Entrega
                                </a>
                            </h2>
                        </div>


                        <div id="payment-address-content" class="panel-collapse collapse">
                            <div class="panel-body row">
                                <form action="/MinhaConta/AlteraEndereco" method="post">
                                    <div class="col-md-6 col-sm-6">
                                        <h3>Endereço</h3>
                                        <div class="form-group">
                                            <label for="cep">CEP<span class="require">*</span></label>
                                            <input type="text" id="cep" name="cep" class="form-control" maxlength="8" value="@ViewBag.Pessoa.Endereco.Cep">
                                        </div>
                                        <div class="form-group">
                                            <label for="numero">Numero<span class="require">*</span></label>
                                            <input type="text" id="numero" name="numero" class="form-control" value="@ViewBag.Pessoa.Endereco.Numero">
                                        </div>
                                        <div class="form-group">
                                            <label for="bairro">Bairro<span class="require">*</span></label>
                                            <input type="text" id="bairro" name="bairro" class="form-control" value="@ViewBag.Pessoa.Endereco.Bairro" readonly>
                                        </div>

                                        <div class="form-group">
                                            <label for="cidade">Cidade<span class="require">*</span></label>
                                            <input type="text" id="cidade" name="cidade" class="form-control" value="@ViewBag.Pessoa.Endereco.Cidade" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6">
                                        <h3 style="text-align:right;"><span class="require">*</span>Obrigatoriedades</h3>
                                        <div class="form-group">
                                            <label for="logradouro">Logradouro<span class="require">*</span></label>
                                            <input type="text" name="logradouro" id="logradouro" class="form-control" value="@ViewBag.Pessoa.Endereco.Logradouro" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label for="complemento">Complemento<span class="require">*</span></label>
                                            <input type="text" id="complemento" name="complemento" class="form-control" value="@ViewBag.Pessoa.Endereco.Complemento">
                                        </div>
                                        <div class="form-group">
                                            <label for="referencia">Referência</label>
                                            <input type="text" id="referencia" name="referencia" class="form-control" value="@ViewBag.Pessoa.Endereco.Referencia">
                                        </div>

                                        <div class="form-group">
                                            <label for="address2">Estado<span class="require">*</span></label>
                                            <input type="text" id="estado" name="estado" class="form-control" value="@ViewBag.Pessoa.Endereco.Estado" readonly>
                                        </div>

                                        <div class="col-md-12">
                                            <button class="btn btn-primary  pull-right" type="submit" id="button-shipping-address" data-toggle="collapse" data-parent="#checkout-page" data-target="#shipping-method-content">Salvar Endereço</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- FIM ENDEREÇOS -->
                    <!-- COMEÇO CONTATOS -->
                    <div id="confirm" class="panel panel-default">
                        <div class="panel-heading">
                            <h2 class="panel-title">
                                <a data-toggle="collapse" data-parent="#checkout-page" href="#shipping-address-content" class="accordion-toggle">
                                    CONTATOS
                                </a>
                            </h2>
                        </div>
                        <form action="/MinhaConta/AlteraContatos" method="post">
                            <div id="shipping-address-content" class="panel-collapse collapse">
                                <div class="panel-body row">
                                    <h3 style="text-align:right;"><span class="require">*</span>Obrigatoriedades</h3>
                                    <div class="col-md-6 col-sm-6">
                                        <div class="form-group">
                                            <label for="email2">Email 2</label>
                                            <input type="email" id="email2" name="email2" class="form-control" value="@ViewBag.Pessoa.Contato.Email" />
                                        </div>

                                        <div class="form-group">
                                            <label for="telefone">Telefone<span class="require">*</span></label>
                                            <input type="tel" id="telefone" name="telefone" class="form-control" maxlength="14" value="@ViewBag.Pessoa.Contato.Telefone">
                                        </div>

                                    </div>
                                    <div class="col-md-6 col-sm-6">
                                        <div class="form-group">
                                            <label for="celular">Celular</label>
                                            <input type="tel" id="celular" name="celular" class="form-control" maxlength="15" value="@ViewBag.Pessoa.Contato.Celular">
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <button class="btn btn-primary  pull-right" type="submit" id="button-shipping-address" data-toggle="collapse" data-parent="#checkout-page" data-target="#shipping-method-content">Salvar Contatos</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- FIM CONTATOS-->

                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/Content/assets/plugins/jquery.min.js" type="text/javascript"></script>
<script src="~/Content/assets/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<script src="~/Content/assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="~/Content/assets/corporate/scripts/back-to-top.js" type="text/javascript"></script>
<script src="~/Content/assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL JAVASCRIPTS (REQUIRED ONLY FOR CURRENT PAGE) -->
<script src="~/Content/assets/plugins/fancybox/source/jquery.fancybox.pack.js" type="text/javascript"></script><!-- pop up -->
<script src="~/Content/assets/plugins/owl.carousel/owl.carousel.min.js" type="text/javascript"></script><!-- slider for products -->
<script src='~/Content/assets/plugins/zoom/jquery.zoom.min.js' type="text/javascript"></script><!-- product zoom -->
<script src="~/Content/assets/plugins/bootstrap-touchspin/bootstrap.touchspin.js" type="text/javascript"></script><!-- Quantity -->
<script src="~/Content/assets/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>

<script src="~/Content/assets/corporate/scripts/layout.js" type="text/javascript"></script>
<script src="~/Content/assets/pages/scripts/checkout.js" type="text/javascript"></script>

@{ if (ViewBag.PessoaFisica)
    {
        <script src="~/Scripts/scriptValidacoesMinhaConta.js"></script>
    }
    if (ViewBag.PessoaJuridica)
    {
        <script src="~/Scripts/scriptMinhaContaJuridica.js"></script>
    }
}


<script>


    $(document).ready(function () {

        function limpa_formulário_cep() {
            // Limpa valores do formulário de cep.
            $("#logradouro").val("");
            $("#bairro").val("");
            $("#cidade").val("");
            $("#estado").val("");
        }

        //Quando o campo cep perde o foco.
        $("#cep").keyup(function () {

            //Nova variável "cep" somente com dígitos.
            var cep = $(this).val().replace(/\D/g, '');

            //Verifica se campo cep possui valor informado.
            if (cep != "") {

                //Expressão regular para validar o CEP.
                var validacep = /^[0-9]{8}$/;

                //Valida o formato do CEP.
                if (validacep.test(cep)) {
                    var completou = $("#cep").attr("maxlength") == $("#cep").val().length;
                    //Preenche os campos com "..." enquanto consulta webservice.
                    $("#logradouro").val("...");
                    $("#bairro").val("...");
                    $("#cidade").val("...");
                    $("#estado").val("...");

                    //Consulta o webservice viacep.com.br/
                    $.getJSON("https://viacep.com.br/ws/" + cep + "/json/?callback=?", function (dados) {

                        if (!("erro" in dados)) {
                            //Atualiza os campos com os valores da consulta.
                            $("#logradouro").val(dados.logradouro);
                            $("#bairro").val(dados.bairro);
                            $("#cidade").val(dados.localidade);
                            $("#estado").val(dados.uf);
                        } //end if.
                        else {
                            //CEP pesquisado não foi encontrado.
                            limpa_formulário_cep();
                            alert("CEP não encontrado.");
                        }
                    });
                }
                else if (completou) {
                    //cep é inválido.
                    limpa_formulário_cep();
                    alert("Formato de CEP inválido.");
                }
            } //end if.
            else {
                //cep sem valor, limpa formulário.
                limpa_formulário_cep();
            }
        });
    });

    function mascara(o, f) {
        v_obj = o
        v_fun = f
        setTimeout("execmascara()", 1)
    }
    function execmascara() {
        v_obj.value = v_fun(v_obj.value)
    }
    function mtel(v) {
        v = v.replace(/\D/g, "");             //Remove tudo o que nao é digito
        v = v.replace(/^(\d{2})(\d)/g, "($1) $2"); //Coloca parenteses em volta dos dois primeiros d�gitos
        v = v.replace(/(\d)(\d{4})$/, "$1-$2");    //Coloca hifen entre o quarto e o quinto d�gitos
        return v;
    }
    function id(el) {
        return document.getElementById(el);
    }
    window.onload = function () {
        id('celular').onkeypress = function () {
            mascara(this, mtel);
        }
        id('telefone').onkeypress = function () {
            mascara(this, mtel);
        }
    }




</script>
